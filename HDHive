#!name=HDHive 自动签到
#!desc=v12.1 纯净版：锁定 hdhive.com，自动抓取Cookie并每日签到。
#!author=ming
#!icon=https://hdhive.com/favicon.ico
#!homepage=https://hdhive.com/

[Argument]
RunTime = input,"0 6 * * *",tag=每日签到时间,desc=Cron表达式
CaptureCookie = switch,true,tag=[开关] 自动获取Cookie,desc=开启后访问网页自动抓取

[Script]
cron {RunTime} script-path=https://raw.githubusercontent.com/xhujer/-/refs/heads/main/HDHive%20Script, tag=HDHive每日签到, timeout=60, script-update-interval=86400

# 抓Cookie：覆盖 go-api/api/页面入口；排除签到接口（避免循环）
http-request ^https?:\/\/(?:www\.)?hdhive\.com\/(?!api\/customer\/user\/checkin)(?:$|user\b|dashboard\b|go-api\b|api\b) script-path=https://raw.githubusercontent.com/xhujer/-/refs/heads/main/HDHive%20Script, tag=HDHive获取Cookie, timeout=10, requires-body=false, enable={CaptureCookie}, script-update-interval=86400

# 抓签到记录(JSON)：精准匹配 points-logs（page=1/2/... 都能抓）
http-response ^https?:\/\/(?:www\.)?hdhive\.com\/go-api\/customer\/points-logs(?:\?.*)?$ script-path=https://raw.githubusercontent.com/xhujer/-/refs/heads/main/HDHive%20Script, tag=HDHive抓取签到记录, timeout=10, requires-body=true, enable={CaptureCookie}, script-update-interval=86400

[Mitm]
hostname = hdhive.com, www.hdhive.com