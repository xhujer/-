#!name=ç½‘æ˜“é‚®ç®±å¤§å¸ˆç²¾ç®€ç‰ˆ+VIP
#!desc=å»å¹¿å‘Šå¹¶è§£é”æœ¬åœ°ä¼šå‘˜æƒç›Šï¼ˆéœ€é…åˆMITMï¼‰ã€‚
#!author=å¯è‰ğŸ…¥ & chxm1023
#!icon=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/MailMaster.png
#!tag=å»å¹¿å‘Š,è§£é”ä¼šå‘˜
#!loon_version=3.2.4(787)

[Script]
# æ ¸å¿ƒï¼šä¿®æ”¹ä¼šå‘˜ä¿¡æ¯ (å¼•ç”¨ chxm1023 çš„é€šç”¨è„šæœ¬)
http-response ^https?:\/\/.*\.mail\.163\.com\/.*\/vip\/privilege\/info script-path=https://raw.githubusercontent.com/chxm1023/Rewrite/main/mailmaster.js, requires-body=true, tag=ç½‘æ˜“é‚®ç®±å¤§å¸ˆä¼šå‘˜

[Body Rewrite]
# ç§»é™¤åŠŸèƒ½åŒºçš„æ¨å¹¿
http-response-jq ^https:\/\/appconf\.mail\.163\.com\/mailmaster\/api\/page\/v2\/conf\.do$ 'delpaths([["data","functionOperatorInfoList"]])'
# ç§»é™¤åº•éƒ¨çš„å‘ç°/æ´»åŠ¨æ ‡ç­¾
http-response-jq ^https:\/\/appconf\.mail\.163\.com\/mailmaster\/api\/page\/v2\/conf\.do$ 'delpaths([["data","activityTabInfoList"]])'
# âš ï¸ æ³¨æ„ï¼šæˆ‘åˆ é™¤äº†åˆ é™¤ memberOperator çš„é‚£è¡Œä»£ç ï¼Œä»¥ä¾¿è®©ä½ çœ‹åˆ°ä¼šå‘˜çŠ¶æ€

# ç²¾ç®€å·¥å…·æ ï¼Œåªä¿ç•™é‚®ä»¶è¿½è¸ªå’Œæ›¿èº«é‚®ç®±
http-response-jq ^https:\/\/appconf\.mail\.163\.com\/mailmaster\/api\/config\/function\.do$ '.data.config[] |= if .result.tools then .result.tools |= map(select(.name == "é‚®ä»¶è¿½è¸ª" or .name == "æ›¿èº«é‚®ç®±")) else . end | del(.data.config[] | select(.functionName == "Function-AD"))'

[Map Local]
# å±è”½å¼€å±å¹¿å‘Šå’Œä»»åŠ¡è¯·æ±‚
^https:\/\/appconf\.mail\.163\.com\/mailmaster\/api\/http\/urlConfig\.do$ data-type=text data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/dashi\.163\.com\/task-center-api\/fapi\/task\/list$ data-type=text data="{}" status-code=200 header="Content-Type:application/json"
^https:\/\/appconf\.mail\.163\.com\/mailoperating\/mailmaster\/api\/operator\/get$ data-type=text data="{}" status-code=200 header="Content-Type:application/json"

[MITM]
# å¿…é¡»åŒ…å« dspay å’Œæ³›åŸŸåä»¥æ‹¦æˆª VIP æ¥å£
hostname = %APPEND% appconf.mail.163.com, dashi.163.com, *.mail.163.com, dspay.mail.163.com
